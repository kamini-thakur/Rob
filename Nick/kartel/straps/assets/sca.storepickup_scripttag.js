if (typeof SCASPSetting === "undefined" || typeof jQuerySCASP === "undefined" || typeof jQuerySCASP.fn.storePickup === "undefined") {
SCASPSetting={"def_apk":["AIzaSyDAvFtuGCyQCMutwFUfTK7ZQleNcfqpVL8","AIzaSyCy6pflEOsxYMUujziwSxNjT473BYBjXm0","AIzaSyDLEdGwkFe2tRVmI7lF2Y2wASI9HNRt6SA","AIzaSyDLbOW5vafmFgEssE67yyBes0p2R4nJo3k","AIzaSyAPQW42YJql7a9L9MPOw5sw_aiznLsjnc4","AIzaSyDmrhS9-VFesH2rQEQdVBYnKF8Op90K_OI","AIzaSyC3M84RBVYWitvl394HdgwWN_DcHOCIbnE"],"sg_enable_app":1,"sg_api_key":"AIzaSyDnEc3an1lqN481gTgY--LcPCpkF95aa_o ","sg_zoom":13,"sg_enable_shipping":1,"sg_enable_pickup":1,"sg_enable_delivery":0,"sg_time_format":0,"sg_search_box":0,"sg_restric_country":[],"sg_autogeocode":0,"sg_pagination":0,"sg_location_per_page":8,"sg_distance_length_unit":"m","sg_cart_form_selector":"form[action*=\"cart\"][method=\"post\"]","sg_pickup_position":"button[name=\"checkout\"]:visible, input[name=\"checkout\"]:visible","sg_hide_address_fields":1,"sg_enable_billing_address":1,"sg_datetime_format":"yyyy\/mm\/dd","sd_tab_background_color":"#ffffff","sd_active_tab_background_color":"#f4f4f4","sd_shop_name_color":"#000000","sd_shop_info_color":"#000000","sd_shop_name_font_type":"","sd_shop_info_font_type":"","sd_tab_border_color":"#c2c2c2","sd_active_tab_border_color":"#000000","sd_search_box_border_color":"#949494","sd_timepicker_box_border_color":"#949494","sp_pickup_conditions":"{\"total_min\":\"0.00\",\"total_max\":\"\",\"operator\":\"and\",\"qty_min\":\"\",\"qty_max\":\"\"}","st_shipping_tab":"Shipping","st_shipping_text_content":"Please click the checkout button to continue.","st_store_pickup_tab":"Store Pickup","st_store_pickup_text_content":"Pick up your order from our St Andrews shop.","st_find_my_location":"Find My Location","st_search_box_placeholder":"Enter your postal code or address...","st_datetime_pickup_placeholder":"Choose a date and time","st_non_select_store_validate_text":"Please choose a store","st_non_select_datetime_validate_text":"Please choose a date and time","st_more_information_text":"More information","st_opening_hours_text":"Opening hours","st_mile_text":"mile","st_miles_text":"miles","st_kilometer_text":"kilometer","st_kilometers_text":"kilometers","st_pickup_text":"Pickup time","st_days_full":{"monday":"Monday","tuesday":"Tuesday","wednesday":"Wednesday","thursday":"Thursday","friday":"Friday","saturday":"Saturday","sunday":"Sunday"},"st_days_short":{"monday":"Mon","tuesday":"Tue","wednesday":"Wed","thursday":"Thu","friday":"Fri","saturday":"Sat","sunday":"Sun"},"st_months_full":{"january":"January","february":"February","march":"March","april":"April","may":"May","june":"June","july":"July","august":"August","september":"September","october":"October","november":"November","december":"December"},"st_months_short":{"january":"Jan","february":"Feb","march":"Mar","april":"Apr","may":"May","june":"Jun","july":"Jul","august":"Aug","september":"Sep","october":"Oct","november":"Nov","december":"Dec"},"st_local_delivery_tab":"Local Delivery","st_local_delivery_text_content":"Enter your address into the field below to check if you are eligible for local delivery","st_delivery_address_validate_success":"Congratulations! You are eligible for delivery.","st_delivery_address_is_required":"Please enter your address to check.","st_delivery_address_is_not_valid":"Sorry. Your location is not available for delivery.","st_delivery_no_validate":"Please choose delivery time.","st_delivery_between_text":"between","st_delivery_and_text":"and","st_delivery_contact_shipping_address_title":"Delivery information","st_delivery_thank_you_marker_shipping":"Delivery address","st_delivery_thank_you_shipping_address_title":"Delivery address","st_delivery_general_edit_shipping_address":"Edit delivery address","st_delivery_general_continue_to_shipping_method":"Continue to delivery method","st_delivery_order_summary_shipping_label":"Delivery","st_delivery_shipping_title":"Delivery method","st_delivery_shipping_waiting_on_rate_notice":"Please wait while we fetch available delivery rates...","st_delivery_shipping_no_rates_for_cart_or_destination_notice":"Delivery is not available for your cart or destination.","st_delivery_shipping_no_rates_for_country_notice":"We don't offer delivery in {{ country }}.","searchLocation":{"4735":0},"locationsRaw":"[{\"id\":4735,\"store_id\":1159,\"name\":\"St Andrews Shop\",\"address\":\"9 Church Street\",\"address2\":\"\",\"city\":\"St Andrews\",\"country\":\"United Kingdom\",\"state\":\"Fife\",\"notification_emails\":\"dale@tyko.co.uk,nick@kartel.co.uk\",\"notification_template\":\"Hi {{$shop_name}},\\r\\nPlease notice the information:\\r\\nYour customer's name: {{$cust_name}}({{$cust_email}})\\r\\nPickup Date: {{$specified_time}}\\r\\nOrder Id: {{$order_id}} \\r\\nOrder Name: {{$order_name}}\\r\\nOrder Link: {{$order_link}}   \\r\\nPickup Address: {{$address}}\\r\\nOrder Summary:\\r\\n{{$order_summary}}\\r\\n\",\"delivery_notification_template\":\"\",\"opening_hours\":{\"2\":{\"name\":\"Monday\",\"keyname\":\"monday\",\"from\":\"10:00\",\"to\":\"17:30\",\"wait_day\":\"1\",\"break_from\":\"0\",\"break_to\":\"0\",\"status\":\"1\"},\"3\":{\"name\":\"Tuesday\",\"keyname\":\"tuesday\",\"from\":\"10:00\",\"to\":\"17:30\",\"wait_day\":\"1\",\"break_from\":\"0\",\"break_to\":\"0\",\"status\":\"1\"},\"4\":{\"name\":\"Wednesday\",\"keyname\":\"wednesday\",\"from\":\"10:00\",\"to\":\"17:30\",\"wait_day\":\"1\",\"break_from\":\"0\",\"break_to\":\"0\",\"status\":\"1\"},\"5\":{\"name\":\"Thursday\",\"keyname\":\"thursday\",\"from\":\"10:00\",\"to\":\"17:30\",\"wait_day\":\"1\",\"break_from\":\"0\",\"break_to\":\"0\",\"status\":\"1\"},\"6\":{\"name\":\"Friday\",\"keyname\":\"friday\",\"from\":\"10:00\",\"to\":\"17:30\",\"wait_day\":\"1\",\"break_from\":\"0\",\"break_to\":\"0\",\"status\":\"1\"},\"7\":{\"name\":\"Saturday\",\"keyname\":\"saturday\",\"from\":\"10:00\",\"to\":\"17:30\",\"wait_day\":\"1\",\"break_from\":\"0\",\"break_to\":\"0\",\"status\":\"1\"},\"1\":{\"name\":\"Sunday\",\"keyname\":\"sunday\",\"from\":\"09:00\",\"to\":\"17:00\",\"wait_day\":\"0\",\"break_from\":\"0\",\"break_to\":\"0\",\"status\":\"0\"}},\"enable_date_picker\":1,\"enable_time_picker\":0,\"time_picker_slot\":10,\"status\":1,\"created_at\":\"2018-01-23 11:31:09\",\"updated_at\":\"2018-01-30 15:40:22\",\"enable_delivery\":0,\"delivery_max_radius\":0,\"delivery_enable_date_picker\":0,\"delivery_enable_time_picker\":0,\"delivery_hours\":{\"2\":{\"name\":\"Monday\",\"keyname\":\"monday\",\"wait_day\":\"0\",\"status\":\"1\"},\"3\":{\"name\":\"Tuesday\",\"keyname\":\"tuesday\",\"wait_day\":\"0\",\"status\":\"1\"},\"4\":{\"name\":\"Wednesday\",\"keyname\":\"wednesday\",\"wait_day\":\"0\",\"status\":\"1\"},\"5\":{\"name\":\"Thursday\",\"keyname\":\"thursday\",\"wait_day\":\"0\",\"status\":\"1\"},\"6\":{\"name\":\"Friday\",\"keyname\":\"friday\",\"wait_day\":\"0\",\"status\":\"1\"},\"7\":{\"name\":\"Saturday\",\"keyname\":\"saturday\",\"wait_day\":\"0\",\"status\":\"1\"},\"1\":{\"name\":\"Sunday\",\"keyname\":\"sunday\",\"wait_day\":\"0\",\"status\":\"1\"}},\"lat\":\"56.3400562\",\"lng\":\"-2.7950117999999975\",\"postal\":\"KY16 9NW\"}]","defaultLat":"56.3400562","defaultLng":"-2.7950117999999975","version":"pickup"};
function scasp_is_installed(){var e=!1;return"undefined"==typeof $&&"undefined"==typeof jQuery||($="undefined"!=typeof $?$:jQuery,e=$('script:contains("storepickup_scripttag"):contains("asyncLoad")').length>0),e}var SCASPLocationsData=null,processPickupData=null,SCASPDeliveryDatePicker=null,SCASPDeliveryTimePicker=null;!function(){function e(e,t,i){if(0==t)return[e,t];for(var a=0;a<=60/i;a++)if(t<=i*a){60==t?(t=0,e++):t=i*a;break}return[e,t]}function t(){return SCASPSetting.sg_api_key?SCASPSetting.sg_api_key.trim():SCASPSetting.def_apk[(new Date).getTime()%SCASPSetting.def_apk.length]}function i(e){var t='<style type="text/css">';t+="#sca-storepickup-methods li {background-color:"+SCASPSetting.sd_tab_background_color+" !important;}",t+="#sca-storepickup-methods li.active {background-color:"+SCASPSetting.sd_active_tab_background_color+" !important;}",t+=".scasp-title {color:"+SCASPSetting.sd_shop_name_color+" !important;}",""!=SCASPSetting.sd_shop_name_font_type&&(t+=".scasp-title {font-family:"+SCASPSetting.sd_shop_name_font_type+" !important;}"),t+=".scasp-address, .scasp-address2, .scasp-city, .scasp-state, .scasp-zipcode, .scasp-country {color:"+SCASPSetting.sd_shop_info_color+" !important;}",""!=SCASPSetting.sd_shop_info_font_type&&(t+=".scasp-address, .scasp-address2, .scasp-city, .scasp-state, .scasp-zipcode, .scasp-country {font-family:"+SCASPSetting.sd_shop_info_font_type+" !important;}"),""!=SCASPSetting.sd_tab_border_color&&(t+="#sca-storepickup-methods li { border-color: "+SCASPSetting.sd_tab_border_color+" !important;}"),""!=SCASPSetting.sd_active_tab_border_color&&(t+="#sca-storepickup-methods li.active { border-color: "+SCASPSetting.sd_active_tab_border_color+" !important;}"),""!=SCASPSetting.sd_search_box_border_color&&(t+="#bh-sl-address { border-color: "+SCASPSetting.sd_search_box_border_color+" !important;}"),""!=SCASPSetting.sd_timepicker_box_border_color&&(t+="#date-pickup { border-color: "+SCASPSetting.sd_timepicker_box_border_color+" !important;}"),t+="</style>",e("html > head").append(t)}function a(e){var t={autoComplete:!0,mapSettings:{zoom:SCASPSetting.sg_zoom,zoomControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},inlineDirections:!0,lengthUnit:SCASPSetting.sg_distance_length_unit,mileLang:SCASPSetting.st_mile_text,milesLang:SCASPSetting.st_miles_text,kilometerLang:SCASPSetting.st_kilometer_text,kilometersLang:SCASPSetting.st_kilometers_text,fullMapStart:!0,slideMap:!1};return t.dataType="json",SCASPSetting.locationsRaw?(t.dataRaw=SCASPSetting.locationsRaw,SCASPLocationsData=e.parseJSON(SCASPSetting.locationsRaw)):t.dataLocation=SCASPSetting.locationsUrl,1==SCASPSetting.sg_autogeocode&&(t.autoGeocode=!0),SCASPSetting.sg_pagination&&(t.pagination=!0,t.locationsPerPage=SCASPSetting.sg_location_per_page),SCASPSetting.defaultLat&&SCASPSetting.defaultLng&&(t.fullMapStart=!1,t.defaultLoc=!0,t.defaultLat=SCASPSetting.defaultLat,t.defaultLng=SCASPSetting.defaultLng),t.callbackMapSet=function(){C(e)&&e(".bh-sl-map, .bh-sl-loc-list, .bh-sl-pagination-container, #date-pickup").hide()},t}function s(t){if(SCASPSetting.sg_enable_app&&(i(t),t("#sca-storepickup-container").show()),"undefined"!=typeof SCASPDisableShipping&&(p=SCASPDisableShipping),"undefined"!=typeof SCASPDisableDelivery&&(l=SCASPDisableDelivery),"undefined"!=typeof SCASPDisablePickup&&(c=SCASPDisablePickup),"undefined"!=typeof SCASPLocale&&(u=SCASPLocale),SCASPSetting.sg_enable_shipping&&!p&&(D(t,0),t(".sca-storepickup-shipping-tab").on("click",function(){t("#sca-storepickup-desc p, .bh-sl-container, #date-pickup, .scasp-error-msg, .scasp-delivery-validate, .scasp-delivery-success, #date-delivery, .scasp-delivery-no-validate").hide(),t("#sca-storepickup-methods li").removeClass("active"),t(".sca-storepickup-shipping-desc").show(),t(".sca-storepickup-shipping-tab").addClass("active"),b(t),D(t,0)})),t(SCASPSetting.sg_cart_form_selector+' input[name="update"], '+SCASPSetting.sg_cart_form_selector+' button[name="update"], '+SCASPSetting.sg_cart_form_selector+" .update_subtotal").click(function(){t(SCASPSetting.sg_cart_form_selector).prop("action","/cart")}),SCASPSetting.sg_enable_pickup&&!c){t(".sca-storepickup-pickup-tab").on("click",function(){t("#sca-storepickup-desc p, #date-delivery, .scasp-delivery-success, .scasp-error-msg, .scasp-delivery-no-validate").hide(),t("#sca-storepickup-methods li").removeClass("active"),t(".sca-storepickup-pickup-desc, .bh-sl-container").show(),t(".sca-storepickup-pickup-tab").addClass("active"),t("#date-pickup, #bh-sl-address").val(""),b(t),1==SCASPSetting.sg_search_box?t("#bh-sl-address").show():t("#bh-sl-address").hide(),void 0!==jQuerySCASP.fn.storePickup&&void 0!==SCASPSetting.storePickup?(SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.mapReload()):v(t),t(".bh-sl-map, .bh-sl-loc-list, .bh-sl-pagination-container").show(),t(".scasp-list-container").first().trigger("click")}),jQuerySCASP(document).on("click",".location_id",function(){var e=jQuerySCASP(this);setTimeout(function(){e.closest(".scasp-list-container").trigger("click")},10)});var a=null,s=t("#scasp-date").pickadate({monthsFull:_,monthsShort:m,weekdaysFull:h,weekdaysShort:f,format:"dddd, dd mmm, yyyy",formatSubmit:SCASPSetting.sg_datetime_format,hiddenPrefix:"scasp-date",today:"",clear:"",close:"",min:!0,onOpen:function(){a=null;var e=t(".list-focus").find(".location_id").val(),i=SCASPLocationsData[r[e]],s=i.opening_hours,n=new Date,o=n.getHours()+":"+n.getMinutes(),c=s[Object.keys(s)[n.getDay()]];o>c.to&&this.set("disable",[new Date(n.getFullYear(),n.getMonth(),n.getDate())]);for(var p=1;p<8;p++)if(s[p].hasOwnProperty("wait_day")){c=s[p];var l=new Date,u=p-(n.getDay()+1);l.setDate(n.getDate()+u);var S=0;if("0"!=c.wait_day&&""!=c.wait_day&&(S=parseInt(c.wait_day)),i.enable_time_picker){var d=0;"0"!=c.wait_day&&""!=c.wait_day&&(d+=24*parseInt(c.wait_day)*60*60*1e3),"0"!=c.wait_hour&&""!=c.wait_hour&&(d+=60*parseInt(c.wait_hour)*60*1e3),"0"!=c.wait_minute&&""!=c.wait_minute&&(d+=60*parseInt(c.wait_minute)*1e3),S=parseInt(d/24/60/60/1e3);var g=(a=new Date((new Date).getTime()+d)).getHours()+":"+a.getMinutes(),_=s[Object.keys(s)[a.getDay()]],m=g.split(":"),h=_.to.split(":");parseInt(m[0]+m[1])>parseInt(h[0]+h[1])&&(a=new Date(a.getTime()+864e5)),this.set("min",new Date(a.getFullYear(),a.getMonth(),a.getDate()))}if(0!=S){var f=new Date(l.getTime()),P=0,k=0;P=S%7==0?S/7:S/7+1;for(var y=0;y<=P;y++)k=(f=new Date(l.getTime()+7*y*24*3600*1e3)).getTime()-n.getTime(),Math.ceil(k/864e5)<=S&&this.set("disable",[new Date(f.getFullYear(),f.getMonth(),f.getDate())])}}},onSet:function(i){if("select"in i){var c=t(".list-focus").find(".location_id").val(),p=SCASPLocationsData[r[c]];if(!p.enable_time_picker)return setTimeout(function(){o.off("focus").val(s.get()).focus().on("focus",s.open),processPickupData(t)},0),!1;var l=p.opening_hours,u=s.get("highlight"),S=l[Object.keys(l)[u.day]],d=S.from.split(":"),g=S.to.split(":"),_=new Date(s.get());if(null!==a){if(a.getFullYear()==_.getFullYear()&&a.getMonth()==_.getMonth()&&a.getDate()==_.getDate()){var m=parseInt(a.getHours()+""+a.getMinutes()),h=S.from.split(":"),f=S.to.split(":");m>parseInt(h[0]+h[1])&&m<parseInt(f[0]+f[1])&&(d=e(parseInt(a.getHours()),parseInt(a.getMinutes()),parseInt(p.time_picker_slot)))}}else{var P=new Date,k=P.getHours(),y=P.getMinutes();P.getFullYear()==_.getFullYear()&&P.getMonth()==_.getMonth()&&P.getDate()==_.getDate()&&(d=e(parseInt(k),parseInt(y),parseInt(p.time_picker_slot)))}setTimeout(function(){if(n.set("disable",!1),S.hasOwnProperty("break_from")&&S.hasOwnProperty("break_to")&&"0"!=S.break_from&&"0"!=S.break_to){var e=S.break_from.split(":"),t=S.break_to.split(":");n.set("disable",[{from:[parseInt(e[0]),parseInt(e[1])],to:[parseInt(t[0]),parseInt(t[1])]}])}n.set("interval",p.time_picker_slot),n.set("min",d),n.set("max",g),n.open()},0)}}}).pickadate("picker"),n=t("#scasp-time").pickatime({clear:"",onSet:function(e){"select"in e&&setTimeout(function(){o.off("focus").val(s.get()+" "+n.get()).focus().on("focus",s.open),processPickupData(t)},0)}}).pickatime("picker");t(document).on("click",".scasp-list-container",function(){t("#sca-storepickup-container .picker").removeClass("picker--focused picker--opened"),t(".scasp-store-required").hide();var e=t(this).find(".location_id").val(),i=SCASPLocationsData[r[e]];if(!i.enable_date_picker)return t("#date-pickup").hide(),t(".scasp-datetime-required").hide(),processPickupData(t,e),!1;t("#date-pickup").show();var a=i.opening_hours,n=[];for(var o in a)a.hasOwnProperty(o)&&"0"==a[o].status&&n.push(parseInt(o));s.set("enable",!0),s.set("disable",n)});var o=t("#date-pickup").on("focus",s.open).on("click",function(e){e.stopPropagation(),s.open()})}if(SCASPSetting.sg_enable_delivery&&!l){t(".sca-storepickup-delivery-tab").on("click",function(){t("#sca-storepickup-desc p, .scasp-error-msg").hide(),t("#sca-storepickup-methods li").removeClass("active"),t(".sca-storepickup-delivery-desc, .bh-sl-container").show(),t(".sca-storepickup-delivery-tab").addClass("active"),t("#bh-sl-address, #date-delivery").val(""),b(t),void 0!==jQuerySCASP.fn.storePickup&&void 0!==SCASPSetting.storePickup?(SCASPSetting.storePickup.reset(),SCASPSetting.storePickup.mapReload()):v(t),t(SCASPSetting.sg_cart_form_selector).prop("action",A(u))});var S=null,d={},P=!1;SCASPDeliveryDatePicker=t("#scasp-delivery-date").pickadate({monthsFull:_,monthsShort:m,weekdaysFull:h,weekdaysShort:f,format:"dddd, dd mmm, yyyy",formatSubmit:SCASPSetting.sg_datetime_format,hiddenPrefix:"scasp-delivery-date",today:"",clear:"",close:"",min:!0,onOpen:function(){S=null;var e=t(".location_id").first().val(),i=SCASPLocationsData[r[e]],a=i.delivery_hours,s=new Date,n=s.getHours()+":"+s.getMinutes(),o=a[Object.keys(a)[s.getDay()]];n>o.to&&this.set("disable",[new Date(s.getFullYear(),s.getMonth(),s.getDate())]);for(var c=1;c<8;c++)if(a[c].hasOwnProperty("wait_day")){o=a[c];var p=new Date,l=c-(s.getDay()+1);p.setDate(s.getDate()+l);var u=0;if("0"!=o.wait_day&&""!=o.wait_day&&(u=parseInt(o.wait_day)),i.delivery_enable_time_picker){var d=0;"0"!=o.wait_day&&""!=o.wait_day&&(d+=24*parseInt(o.wait_day)*60*60*1e3),"0"!=o.wait_hour&&""!=o.wait_hour&&(d+=60*parseInt(o.wait_hour)*60*1e3),"0"!=o.wait_minute&&""!=o.wait_minute&&(d+=60*parseInt(o.wait_minute)*1e3),u=parseInt(d/24/60/60/1e3);var g=(S=new Date((new Date).getTime()+d)).getHours()+":"+S.getMinutes(),_=a[Object.keys(a)[S.getDay()]],m=g.split(":"),h=0;if(_.hasOwnProperty("slot"))for(C=0;C<Object.keys(_.slot).length;C++){var f=_.slot[C].to.split(":");parseInt(f[0]+f[1])>h&&(h=parseInt(f[0]+f[1]))}parseInt(m[0]+m[1])>h&&(S=new Date(S.getTime()+864e5)),this.set("min",new Date(S.getFullYear(),S.getMonth(),S.getDate()))}if("0"!=u&&""!=u){var P=new Date(p.getTime()),k=0,y=0;k=u%7==0?u/7:u/7+1;for(var C=0;C<=k;C++)y=(P=new Date(p.getTime()+7*C*24*3600*1e3)).getTime()-s.getTime(),Math.ceil(y/864e5)<=u&&this.set("disable",[new Date(P.getFullYear(),P.getMonth(),P.getDate())])}}},onSet:function(i){if("select"in i){var a=t(".location_id").first().val(),s=SCASPLocationsData[r[a]];if(!s.delivery_enable_time_picker)return setTimeout(function(){k.off("focus").val(SCASPDeliveryDatePicker.get()).focus().on("focus",SCASPDeliveryDatePicker.open),processPickupData(t)},0),!1;P=!0;var n=[],o=s.delivery_hours,c=SCASPDeliveryDatePicker.get("highlight"),p="24:00";if(!(d=o[Object.keys(o)[c.day]]).hasOwnProperty("slot"))return setTimeout(function(){k.off("focus").val(SCASPDeliveryDatePicker.get()).focus().on("focus",SCASPDeliveryDatePicker.open),processPickupData(t),t('input[name="attributes[Delivery-Time]"]').val("")},0),!1;for(var l=0;l<Object.keys(d.slot).length;l++){var u=p.split(":"),g=d.slot[l].from.split(":");parseInt(u[0]+""+u[1])<parseInt(g[0]+""+g[1])&&(p=d.slot[l].from),n.push(d.slot[l].from.split(":"))}var _=p.split(":"),m=new Date(SCASPDeliveryDatePicker.get());if(null!==S)S.getFullYear()==m.getFullYear()&&S.getMonth()==m.getMonth()&&S.getDate()==m.getDate()&&parseInt(S.getHours()+""+S.getMinutes())>_&&(_=e(parseInt(S.getHours()),parseInt(S.getMinutes()),15));else{var h=new Date,f=h.getHours(),y=h.getMinutes();h.getFullYear()==m.getFullYear()&&h.getMonth()==m.getMonth()&&h.getDate()==m.getDate()&&(_=e(parseInt(f),parseInt(y),15))}setTimeout(function(){SCASPDeliveryTimePicker.set("disable",!0),SCASPDeliveryTimePicker.set("disable",n),SCASPDeliveryTimePicker.set("min",_),SCASPDeliveryTimePicker.open()},0)}}}).pickadate("picker"),SCASPDeliveryTimePicker=t("#scasp-delivery-time").pickatime({clear:"",interval:15,formatLabel:function(e){if(P&&d.hasOwnProperty("slot"))for(var t=0;t<Object.keys(d.slot).length;t++){var i=d.slot[t].from.split(":");if(e.hour==parseInt(i[0])&&e.mins==parseInt(i[1])){var a=d.slot[t].to.split(":");return"h:i A - "+y(parseInt(a[0]),parseInt(a[1]))}}return""},onSet:function(e){"select"in e&&setTimeout(function(){P=!1;var e=t("#sca-storepickup-desc .picker__list-item--selected").html();k.off("focus").val(SCASPDeliveryDatePicker.get()+" "+SCASPSetting.st_delivery_between_text+" "+e.replace("-",SCASPSetting.st_delivery_and_text)).focus().on("focus",SCASPDeliveryDatePicker.open),processPickupData(t)},0)}}).pickatime("picker");var k=t("#date-delivery").on("focus",SCASPDeliveryDatePicker.open).on("click",function(e){e.stopPropagation(),SCASPDeliveryDatePicker.open()})}var w=[];if(!SCASPSetting.sg_enable_shipping||p?(t(".sca-storepickup-shipping-tab").hide(),t(".sca-storepickup-shipping-desc").hide()):w.push("shipping"),!SCASPSetting.sg_enable_pickup||c||"delivery"==SCASPSetting.version?t(".sca-storepickup-pickup-tab").hide():w.push("pickup"),!SCASPSetting.sg_enable_delivery||l||"pickup"==SCASPSetting.version?t(".sca-storepickup-delivery-tab").hide():w.push("delivery"),1==w.length)switch(t("ul#sca-storepickup-methods").hide(),w[0]){case"shipping":t(".sca-storepickup-shipping-desc").hide();break;case"pickup":t("#sca-storepickup-container").prepend("<h3>"+SCASPSetting.st_store_pickup_tab+"</h3>"),t(".sca-storepickup-pickup-tab").trigger("click");break;case"delivery":t("#sca-storepickup-container").prepend("<h3>"+SCASPSetting.st_local_delivery_tab+"</h3>"),t(".sca-storepickup-delivery-tab").trigger("click");break;default:t(".sca-storepickup-shipping-desc").hide()}t('button[name="checkout"], input[name="checkout"]').on("click",function(){var e=0,i=t(".scasp-datetime-required");if(C(t)){var a=t(".scasp-address-required");""==t("#bh-sl-address").val()&&"none"!=t("#bh-sl-address").css("display")?(a.show(),e++):a.hide(),""==t("#date-delivery").val()&&"none"!=t("#date-delivery").css("display")?(i.show(),e++):i.hide(),"none"!=t(".scasp-delivery-validate").css("display")&&e++}else{var s=t(".scasp-store-required");t(".sca-storepickup-pickup-tab").hasClass("active")&&(t(".location_id").is(":checked")?s.hide():(s.show(),e++)),t(".sca-storepickup-pickup-tab").hasClass("active")&&""==t("#date-pickup").val()&&"none"!=t("#date-pickup").css("display")?(i.show(),e++):i.hide()}if(e>0)return!1});try{t(".scasp-initbm").length>0&&0==t(".scasp-brankmark").length&&!c&&SCASPSetting.sg_enable_pickup&&(t('<div id="scasp-brankmark" class="scasp-brankmark" style="position: static !important;bottom: -50px;left:45%;background: #979595!important;display:block !important;font-family:sans-serif;font-size:13px;text-align:center;box-sizing:border-box;"><a onclick="window.open(\'http://secomapp.com/?utm_channel=referral&amp;utm_medium=storepickup&amp;utm_campaign=spreferral\', \'_blank\')" href="http://secomapp.com/?utm_channel=referral&amp;utm_medium=storepickup&amp;utm_campaign=spreferral" style="color:white!important;">Powered by <span style="color:#006eff!important;text-decoration: underline;">Secomapp</span></a> </div>').insertBefore("#sca-storepickup-desc"),t(".scasp-brankmark a").click(function(e){e.preventDefault()}))}catch(e){}if("function"==typeof scaStorePickupCallback)try{scaStorePickupCallback()}catch(e){g.log("Callback Error!"),g.log(e)}}function n(e){void 0!==jQuerySCASP.fn.storePickup||void 0===google.maps||jQuerySCASP.scaslpluginLoaded||(jQuerySCASP.scaslpluginLoaded=!0,P("//cdn.secomapp.com/storepickup/assets/cdn/js/jquery.storepickup.js",function(){g.log("Loaded Pickup plugin."),e(document).ready(function(){s(jQuerySCASP)})}))}if(SCASPSetting.sg_enable_app){SCASPSetting.sg_pickup_position||(SCASPSetting.sg_pickup_position='button[name="checkout"]:visible, input[name="checkout"]:visible');for(var o,r=SCASPSetting.searchLocation,c=!1,p=!1,l=!1,u="en",S=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=S.length,g=window.console=window.console||{};d--;)g[o=S[d]]||(g[o]=function(){});var _=["January","February","March","April","May","June","July","August","September","October","November","December"],m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];void 0!==SCASPSetting.st_months_full&&null!=SCASPSetting.st_months_full&&(_=[SCASPSetting.st_months_full.january,SCASPSetting.st_months_full.february,SCASPSetting.st_months_full.march,SCASPSetting.st_months_full.april,SCASPSetting.st_months_full.may,SCASPSetting.st_months_full.june,SCASPSetting.st_months_full.july,SCASPSetting.st_months_full.august,SCASPSetting.st_months_full.september,SCASPSetting.st_months_full.october,SCASPSetting.st_months_full.november,SCASPSetting.st_months_full.december]),void 0!==SCASPSetting.st_months_short&&null!=SCASPSetting.st_months_short&&(m=[SCASPSetting.st_months_short.january,SCASPSetting.st_months_short.february,SCASPSetting.st_months_short.march,SCASPSetting.st_months_short.april,SCASPSetting.st_months_short.may,SCASPSetting.st_months_short.june,SCASPSetting.st_months_short.july,SCASPSetting.st_months_short.august,SCASPSetting.st_months_short.september,SCASPSetting.st_months_short.october,SCASPSetting.st_months_short.november,SCASPSetting.st_months_short.december]),void 0!==SCASPSetting.st_days_full&&null!=SCASPSetting.st_days_full&&(h=[SCASPSetting.st_days_full.sunday,SCASPSetting.st_days_full.monday,SCASPSetting.st_days_full.tuesday,SCASPSetting.st_days_full.wednesday,SCASPSetting.st_days_full.thursday,SCASPSetting.st_days_full.friday,SCASPSetting.st_days_full.saturday]),void 0!==SCASPSetting.st_days_short&&null!=SCASPSetting.st_days_short&&(f=[SCASPSetting.st_days_short.sunday,SCASPSetting.st_days_short.monday,SCASPSetting.st_days_short.tuesday,SCASPSetting.st_days_short.wednesday,SCASPSetting.st_days_short.thursday,SCASPSetting.st_days_short.friday,SCASPSetting.st_days_short.saturday]);var P=function(e,t){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,t())}:i.onload=function(){t()},i.src=e,document.getElementsByTagName("head")[0].appendChild(i)},k=function(e,t){if("js"==t)(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",e);else if("css"==t){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e)}void 0!==i&&document.getElementsByTagName("head")[0].appendChild(i)},y=function(e,t){var i=e>=12?"PM":"A";return e%=12,e=e||12,t=t<10?"0"+t:t,e+":"+t+" "+i},C=function(e){return e(".sca-storepickup-delivery-tab").length>0&&e(".sca-storepickup-delivery-tab").hasClass("active")},v=function(e){e(".bh-sl-form-container").show(),e("#bh-sl-map-container, .bh-sl-map-container").storePickup(a(e)),SCASPSetting.storePickup=e("#bh-sl-map-container").data("plugin_storePickup")},A=function(e){var t="/cart?step=contact_information";return t+="&checkout[shipping_address][company]=",t+="&checkout[shipping_address][address1]=",t+="&checkout[shipping_address][address2]=",t+="&checkout[shipping_address][city]=",t+="&checkout[shipping_address][country]=",t+="&checkout[shipping_address][zip]=",t+="&checkout[shipping_address][province]=",t+="&sca_pickup_text=",t+="&sca_pickup_date=",t+="&sca_hide_address=",t+="&sca_enable_billing=",t+="&locale="+e},b=function(e){e('input[name="attributes[Checkout-Method]"]').val(""),e('input[name="attributes[Pickup-Location-Id]"]').val(""),e('input[name="attributes[Pickup-Date]"]').val(""),e('input[name="attributes[Pickup-Time]"]').val(""),e('input[name="attributes[Pickup-Location-Company]"]').val(""),e('input[name="attributes[Pickup-Location-Address-Line-1]"]').val(""),e('input[name="attributes[Pickup-Location-Address-Line-2]"]').val(""),e('input[name="attributes[Pickup-Location-City]"]').val(""),e('input[name="attributes[Pickup-Location-Region]"]').val(""),e('input[name="attributes[Pickup-Location-Postal-Code]"]').val(""),e('input[name="attributes[Pickup-Location-Country]"]').val(""),e('input[name="attributes[Delivery-Location-Id]"]').val(""),e('input[name="attributes[Delivery-Date]"]').val(""),e('input[name="attributes[Delivery-Time]"]').val("")};SCASPSetting.getParametersApi=function(){if(jQuerySCASP(".sca-storepickup-pickup-tab").length<1||!jQuerySCASP(".sca-storepickup-pickup-tab").hasClass("active"))return"";for(var e=SCASPLocationsData,t=jQuerySCASP(".location_id:checked").val(),i=null,a=0;a<e.length;a++)if(e[a].id==t){i=e[a];break}if(null!=i){var s="";return s+=w(jQuerySCASP,s,i,u)}return""};var D=function(e,t){var i="";0!==t?i=w(e,i+="/cart?",t,u):i+=A(u),e(SCASPSetting.sg_cart_form_selector).prop("action",i)},w=function(e,t,i,a){return C(e)?(t+="step=contact_information&method=delivery",t+="&checkout[shipping_address][company]=",t+="&checkout[shipping_address][address1]=",t+="&checkout[shipping_address][address2]=",t+="&checkout[shipping_address][city]=",t+="&checkout[shipping_address][country]="+encodeURIComponent(i.country),t+="&checkout[shipping_address][zip]="+encodeURIComponent(i.postal),t+="&checkout[shipping_address][province]="+encodeURIComponent(i.state),a.indexOf("-")>=0?t+="&locale="+a+"SCALD":t+="&locale="+a+"-SCALD"):(t+="step=contact_information&method=shipping",t+="&checkout[shipping_address][company]="+encodeURIComponent(i.name),t+="&checkout[shipping_address][address1]="+encodeURIComponent(i.address),t+="&checkout[shipping_address][address2]="+encodeURIComponent(i.address2),t+="&checkout[shipping_address][city]="+encodeURIComponent(i.city),t+="&checkout[shipping_address][country]="+encodeURIComponent(i.country),t+="&checkout[shipping_address][zip]="+encodeURIComponent(i.postal),t+="&checkout[shipping_address][province]="+encodeURIComponent(i.state),t+="&sca_pickup_text="+encodeURIComponent(SCASPSetting.st_pickup_text),t+="&sca_pickup_date="+encodeURIComponent(e("#date-pickup").val()),t+="&sca_hide_address="+encodeURIComponent(""+SCASPSetting.sg_hide_address_fields),t+="&sca_enable_billing="+encodeURIComponent(""+SCASPSetting.sg_enable_billing_address),a.indexOf("-")>=0?t+="&locale="+a+"SCASP":t+="&locale="+a+"-SCASP"),t};processPickupData=function(e,t){var i=SCASPLocationsData;if(C(e)){void 0===t&&(t=e(".location_id").first().val()),e('input[name="attributes[Checkout-Method]"]').val("delivery"),e('input[name="attributes[Delivery-Date]"]').val(e('input[name="scasp-delivery-date_submit"]').val()),e('input[name="attributes[Delivery-Time]"]').val(e("#sca-storepickup-desc .picker__list-item--selected").html()),e('input[name="attributes[Delivery-Location-Id]"]').val(t);for(var a=0;a<i.length;a++)if(i[a].id==t){var s=i[a];return D(e,s),!1}}else{void 0===t&&(t=e(".location_id:checked").val());for(var n=0;n<i.length;n++)if(i[n].id==t){var o=i[n];return e('input[name="attributes[Checkout-Method]"]').val("pickup"),e('input[name="attributes[Pickup-Location-Id]"]').val(o.id),e('input[name="attributes[Pickup-Date]"]').val(e('input[name="scasp-date_submit"]').val()),e('input[name="attributes[Pickup-Time]"]').val(e("#scasp-time").val()),e('input[name="attributes[Pickup-Location-Company]"]').val(o.name),e('input[name="attributes[Pickup-Location-Address-Line-1]"]').val(o.address),e('input[name="attributes[Pickup-Location-Address-Line-2]"]').val(o.address2),e('input[name="attributes[Pickup-Location-City]"]').val(o.city),e('input[name="attributes[Pickup-Location-Region]"]').val(o.state),e('input[name="attributes[Pickup-Location-Postal-Code]"]').val(o.postal),e('input[name="attributes[Pickup-Location-Country]"]').val(o.country),D(e,o),!1}}},SCASPSetting.handlerScriptApi=function(e){if(!(e(SCASPSetting.sg_pickup_position).length>0))return!1;var t=e("#scasp-container-template").html(),i=Handlebars.compile(t);e(SCASPSetting.sg_pickup_position).before(i(SCASPSetting)),s(e)},SCASPSetting.initStorePickup=function(e){if(!(e(SCASPSetting.sg_pickup_position).length>0&&e("#scasp-container-template").length>0))return!1;if(!scasp_is_installed())return!1;var i=e("#scasp-container-template").html(),a=Handlebars.compile(i);e(SCASPSetting.sg_pickup_position).before(a(SCASPSetting)),g.log("loading store pickup plugin..."),k("//cdn.secomapp.com/storepickup/assets/cdn/css/storepickup.css","css"),"undefined"!=typeof google&&void 0!==google.maps||jQuerySCASP.scaslgoogleLoaded?n(e):(jQuerySCASP.scaslgoogleLoaded=!0,P("//maps.google.com/maps/api/js?key="+t()+"&libraries=places",function(){g.log("Loaded google map"),n(jQuerySCASP)}))};"undefined"==typeof jQuery||function(e,t){try{var i=e.split("."),a=t.split("."),s=1e8*parseInt(i[0])+1e6*parseInt(i[1])+1e4*parseInt(i[2]),n=1e8*parseInt(a[0])+1e6*parseInt(a[1])+1e4*parseInt(a[2]);return s>n?1:s<n?-1:0}catch(e){g.log(e)}return 1}("3.0.0",jQuery.fn.jquery)>0?"undefined"==typeof jQuerySCASP?P("//code.jquery.com/jquery-3.0.0.min.js",function(){g.log("finished load jquery..."),jQuerySCASP=jQuery.noConflict(!0),SCASPSetting.initStorePickup(jQuerySCASP)}):SCASPSetting.initStorePickup(jQuerySCASP):(g.log("use shop's jquery.."),jQuerySCASP=jQuery,SCASPSetting.initStorePickup(jQuerySCASP))}}(),function(){if(!SCASPSetting.scasp_ajax_disable){SCASPSetting.appendPickupTo=function(e){$(e+" .scasp_pickup_position").length<1&&$(e).append('<span class="scasp_pickup_position"></span>'),SCASPSetting.sg_pickup_position=".scasp_pickup_position"},SCASPSetting.doAjaxPickup=function(e,t,i){-1!=i.url.indexOf("/cart.js")&&setTimeout(function(){-1==window.location.href.indexOf("/cart")&&$.ajax({type:"get",url:"/cart",success:function(e){var t='form[action*="cart"][method="post"]';if(-1!=Shopify.theme.name.toLowerCase().indexOf("turbo")&&(SCASPSetting.sg_pickup_position=".cart_container .cart_content .action_button",t='form[action*="checkout"][method="post"]'),-1!=Shopify.theme.name.toLowerCase().indexOf("boundless")&&SCASPSetting.appendPickupTo(".ajaxcart__inner"),-1!=Shopify.theme.name.toLowerCase().indexOf("narrative")&&$(".cart-drawer__footer").css("overflow","auto"),-1!=Shopify.theme.name.toLowerCase().indexOf("brooklyn")&&SCASPSetting.appendPickupTo(".ajaxcart__inner"),-1!=Shopify.theme.name.toLowerCase().indexOf("parallax")&&(t="#cart",$("#cart").attr("action","/cart"),SCASPSetting.sg_pickup_position='#cart input[type="submit"]'),-1!=Shopify.theme.name.toLowerCase().indexOf("turbo")&&(t=".header .top_bar .cart_container .js-cart_content__form",$(t).attr("action","/cart"),SCASPSetting.sg_pickup_position=t+' input[type="submit"]'),"undefined"!=typeof scasp_ajax_callback){var i=scasp_ajax_callback();i&&(t=i)}if(0!=$('script[src*="storepickup_scripttag"]').length){$('script[src*="storepickup_scripttag"]').eq(0).attr("src");var a=$("<div/>").html(e);$(t).length>0&&$(".scasp-wrapper",a).length>0&&($(t+" .scasp-wrapper").remove(),$(t+" #sca-storepickup-container").remove(),$(t).append($(".scasp-wrapper",a)),"undefined"!=typeof jQuerySCASP&&void 0!==jQuerySCASP.fn.storePickup?(void 0!==SCASPSetting.storePickup&&SCASPSetting.storePickup.reset(),SCASPSetting.handlerScriptApi(jQuerySCASP)):SCASPSetting.initStorePickup(jQuerySCASP))}},error:function(){}})},1e3)};try{if(!scasp_is_installed())return!1;$(document).ajaxComplete(SCASPSetting.doAjaxPickup),-1!=Shopify.theme.name.toLowerCase().indexOf("narrative")&&SCASPSetting.doAjaxPickup(null,null,{url:"//secomapp.com/cart.js"}),-1!=Shopify.theme.name.toLowerCase().indexOf("parallax")&&SCASPSetting.doAjaxPickup(null,null,{url:"//secomapp.com/cart.js"}),-1!=Shopify.theme.name.toLowerCase().indexOf("turbo")&&SCASPSetting.doAjaxPickup(null,null,{url:"//secomapp.com/cart.js"}),$.getScript("//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js")}catch(e){console.log(e)}}}();
 } 